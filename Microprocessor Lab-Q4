.MODEL SMALL
.STACK 100H
.DATA
    prompt db 'Enter N (1-4): $'
    newline db 0DH, 0AH, '$'
    single_space db ' $'
    double_space db '  $'
    N db ?
    current_max db ?
    indent db ?

.CODE
MAIN PROC
    MOV AX, @DATA
    MOV DS, AX

    ; Display prompt
    MOV AH, 09H
    LEA DX, prompt
    INT 21H

    ; Read N (single digit input)
    MOV AH, 01H
    INT 21H
    SUB AL, '0'
    MOV N, AL

    ; Print newline
    MOV AH, 09H
    LEA DX, newline
    INT 21H

    ; Calculate initial max number (2N-1)
    MOV AL, N
    ADD AL, AL
    DEC AL
    MOV current_max, AL

    ; Top half of pattern
    MOV BL, 0       ; Indent level
TOP_HALF:
    ; Calculate and print indentation
    MOV CX, 0
    MOV CL, BL
    CMP CX, 0
    JE NO_INDENT_TOP
PRINT_INDENT_TOP:
    MOV AH, 09H
    LEA DX, double_space
    INT 21H
    LOOP PRINT_INDENT_TOP
NO_INDENT_TOP:

    ; Print numbers with single spaces
    MOV BH, current_max
PRINT_NUM_TOP:
    MOV DL, BH
    ADD DL, '0'
    MOV AH, 02H
    INT 21H

    CMP BH, 1
    JE NO_SPACE_TOP
    MOV AH, 09H
    LEA DX, single_space
    INT 21H
NO_SPACE_TOP:
    DEC BH
    JNZ PRINT_NUM_TOP

    ; Newline
    MOV AH, 09H
    LEA DX, newline
    INT 21H

    ; Prepare next line
    SUB current_max, 2
    INC BL          ; Increase indent
    CMP current_max, 0
    JG TOP_HALF

    ; Bottom half of pattern
    SUB BL, 2       ; Adjust indent
    MOV current_max, 3
BOTTOM_HALF:
    ; Check if done
    MOV AL, N
    ADD AL, AL
    DEC AL
    CMP current_max, AL
    JG DONE

    ; Print indentation
    MOV CX, 0
    MOV CL, BL
    CMP CX, 0
    JE NO_INDENT_BOTTOM
PRINT_INDENT_BOTTOM:
    MOV AH, 09H
    LEA DX, double_space
    INT 21H
    LOOP PRINT_INDENT_BOTTOM
NO_INDENT_BOTTOM:

    ; Print numbers with single spaces
    MOV BH, current_max
PRINT_NUM_BOTTOM:
    MOV DL, BH
    ADD DL, '0'
    MOV AH, 02H
    INT 21H

    CMP BH, 1
    JE NO_SPACE_BOTTOM
    MOV AH, 09H
    LEA DX, single_space
    INT 21H
NO_SPACE_BOTTOM:
    DEC BH
    JNZ PRINT_NUM_BOTTOM

    ; Newline
    MOV AH, 09H
    LEA DX, newline
    INT 21H

    ; Prepare next line
    ADD current_max, 2
    DEC BL          ; Decrease indent
    JMP BOTTOM_HALF

DONE:
    MOV AH, 4CH
    INT 21H
MAIN ENDP
END MAIN